<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

</head>

<body style="background: linear-gradient(to right, #b92b27, #1565c0);">
    <section>
        <div class="container py-5 h-100">
            <div class="row d-flex justify-content-center align-items-center ">
                <div class="card" style="border-radius: 1rem;">

                    <form class="p-5" id="form" method="POST" action="register">

                        <h3 class="fw-normal mb-3 pb-3" style="letter-spacing: 1px;">Sign Up
                        </h3>

                        <div class="form-outline mb-4">
                            <input type="username" id="username" name="username" class="form-control form-control-lg" />
                            <label class="form-label" for="username">username</label>
                        </div>

                        <div class="form-outline mb-4">
                            <input type="email" id="email" name="email" class="form-control form-control-lg" />
                            <label class="form-label" for="email">Email address</label>
                        </div>

                        <div class="form-outline mb-4">
                            <input type="password" id="password" name="password" class="form-control form-control-lg" />
                            <label class="form-label" for="password">Password</label>
                        </div>

                        <div class="pt-1 mb-4">
                            <button class="btn btn-dark btn-lg btn-block" type="submit">Sign up</button>
                        </div>
                        <p class="mb-2 pb-lg-2" style="color: #393f81;">Already have an account? <a href="login"
                                style="color: #1565c0;">Login here</a></p>
                        <% if(locals.message){ %>
                            <h6 class="alter alert-danger text-capitalize text-center rounded-3">
                                <%= message %>
                            </h6>
                            <% } %>
                                <h6 id="error" class="alter alert-danger text-capitalize text-center rounded-3">

                                </h6>

                    </form>
                </div>
            </div>
        </div>
    </section>

    <script>
        const form = document.getElementById("form");
        const submit = document.getElementById("submit");

        const user = document.getElementById("username")
        const email = document.getElementById("email");
        const password = document.getElementById("password");
        const error = document.getElementById("error");

        //for email format validation
        function isEmail(email) {
            return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email)
        }
        form.addEventListener('submit', (e) => {
            if (user.value == "") {
                error.innerText = "short user name";
                e.preventDefault();
            }
            else if (password.value.length == "") {
                error.innerText = "short password";
                e.preventDefault();
            }
            else if (!isEmail(email.value)) {

                error.innerText = "Enter proper Email";
                e.preventDefault();

            }

        })


    </script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
</body>

</html>